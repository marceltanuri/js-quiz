<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
 </head>

<body>

    <div class="container">
        <div class="row">
          <div class="col-sm text-center">
            <h1>Controle de Acesso</h1>
          </div>
        </div>
        <div class="row"></div>
          <hr/>
          <br/><br/>
        </div>
        <div id="video" class="text-center col-sm col-lg-6 offset-lg-3">
            <iframe src="https://drive.google.com/file/d/1eBF0esEYB5aAcm0BEaCWTgqRMx0lgrPz/preview" width="640" height="480"></iframe>
            <div>
              <div style="float: right; margin-top: 20px;">
                <button type="button" onclick="$('#video').hide(400); $('#dadospessoais').show(400);" class="btn btn-primary">Próximo</button>
              </div>
            </div>
        </div> 
        <div id="dadospessoais" style="display: none;" class="col-sm col-lg-6 offset-lg-3">
            <form id="form_dadospessoais">
                <div class="form-group">
                <label for="nome">Nome Completo</label>
                <input required type="text" class="form-control" id="nome">
                </div>
                <div class="form-group">
                    <label for="cpf">CPF</label>
                    <input required type="number" class="form-control" id="cpf">
                </div>
                <div class="form-group">
                    <label for="empresa">Empresa</label>
                    <input required type="text" class="form-control" id="empresa">
                </div>
                <div class="form-group">
                    <label for="funcao">Função</label>
                    <input required type="text" class="form-control" id="funcao">
                </div>
                <div class="form-group">
                    <label for="funcao">Telefone</label>
                    <input required type="tel" pattern="[0-9]{2} [0-9]{5}-[0-9]{4}" class="form-control" id="telefone">
                </div>
                <div class="form-group">
                  <label for="funcao">E-mail</label>
                  <input required type="email" class="form-control" id="email">
              </div>
                <div style="float: right;">
                  <button type="button" onclick="$('#dadospessoais').hide(400); $('#video').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
                  <button type="submit" class="btn btn-primary">Próximo</button>
                </div>
            </form>
        </div>
        <div id="questao1" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 01 </h4>
            <span>Quantas estrelas tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q1optradio">15
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q1optradio">27
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q1optradio">19
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q1optradio">22
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q1optradio">29
                </label>
              </div>

            <br/><br/>
            <button type="button" onclick="$('#questao1').hide(400); $('#dadospessoais').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="$('#questao1').hide(400); $('#questao2').show(400);" class="btn btn-primary">Próximo</button>
        </div>
        <div id="questao2" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 02 </h4>
            <span>Quantas letras tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q2optradio">14
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q2optradio">24
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q2optradio">17
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q2optradio">19
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q2optradio">22
                </label>
              </div>
            <br/><br/>
            <button type="button" onclick="$('#questao2').hide(400); $('#questao1').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="$('#questao2').hide(400); $('#questao3').show(400);" class="btn btn-primary">Próximo</button>
        </div>
        <div id="questao3" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 03 </h4>
            <span>Quantas frases tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q3optradio">1
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q3optradio">3
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q3optradio">5
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q3optradio">18
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q3optradio">28
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q3optradio">2
                </label>
              </div>
            <br/><br/>
            <button type="button" onclick="$('#questao3').hide(400); $('#questao2').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="$('#questao3').hide(400); $('#questao4').show(400);" class="btn btn-primary">Próximo</button>
        </div>
        <div id="questao4" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 04 </h4>
            <span>Quantas palavras tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q4optradio">2
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q4optradio">3
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q4optradio">5
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q4optradio">16
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q4optradio">1
                </label>
              </div>
            <br/><br/>
            <button type="button" onclick="$('#questao4').hide(400); $('#questao3').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="$('#questao4').hide(400); $('#questao5').show(400);" class="btn btn-primary">Próximo</button>
        </div>
        <div id="questao5" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 05 </h4>
            <span>Quantas vogais tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q5optradio">3
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q5optradio">12
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q5optradio">6
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q5optradio">17
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q5optradio">22
                </label>
              </div>
            <br/><br/>
            <button type="button" onclick="$('#questao5').hide(400); $('#questao4').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="$('#questao5').hide(400); $('#questao6').show(400);" class="btn btn-primary">Próximo</button>
        </div>
        <div id="questao6" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 06 </h4>
            <span>Quantas consoantes tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q6optradio">11
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q6optradio">12
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q6optradio">14
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q6optradio">15
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q6optradio">10
                </label>
              </div>
            <br/><br/>
            <button type="button" onclick="$('#questao6').hide(400); $('#questao5').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="$('#questao6').hide(400); $('#questao7').show(400);" class="btn btn-primary">Próximo</button>
        </div>
        <div id="questao7" class="questao col-sm col-lg-6 offset-lg-3" style="display: none;">
            <h4>Questão 07 </h4>
            <span>Quantos substantivos tem a bandeira do Brasil</span>
            <br/><br/>
            <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q7optradio">1
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" data-gabarito='true' name="q7optradio">2
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q7optradio">8
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q7optradio">4
                </label>
              </div>
              <br/>
              <div class="form-check">
                <label class="form-check-label">
                  <input type="radio" class="form-check-input" name="q7optradio">3
                </label>
              </div>
            <br/><br/>
            <button type="button" onclick="$('#questao7').hide(400); $('#questao6').show(400);" class="btn btn-primary">Anterior</button>&nbsp;&nbsp;&nbsp;
            <button type="button" onclick="sendEmail();" class="btn btn-primary">Finalizar</button>
        </div>
    </div>
    
</body>
</html>

<script>
    function sendEmail(){

        var questoes = $('.questao').length;

        var acertos = 0;
        $('.form-check-input').each(function(){
            if($(this).is(':checked')){
                if($(this).data('gabarito')){
                    acertos++;
                }
            }
        });

        var pontos = (acertos/questoes)*100;

        if(pontos > 60){
        alert('Ótimo você fez ' + pontos.round(2) + ' pontos. Seu acesso está sendo liberado');
            Email.send({
                Host : "smtp.elasticemail.com",
                Username : "marcel.tanuri@gmail.com",
                Password : "76C3EC4BA74F0EB5C3878FF68A00E9E10F08",
                To : 'marcel.tanuri@gmail.com',
                From : "marcel.tanuri@gmail.com",
                Subject : "Novo cadastro de acesso",
                Body : "<h3>Dados pessoais:</h3>"+
                "Nome: <input type='text' value='"+$('#nome').val()+"'/><br/><br/>"+
                "CPF: <input type='text' value='"+$('#cpf').val()+"'/><br/><br/>"+
                "Empresa: <input type='text' value='"+$('#empresa').val()+"'/><br/><br/>"+
                "Função: <input type='text' value='"+$('#funcao').val()+"'/><br/><br/>"+
                "Telefone: <input type='text' value='"+$('#telefone').val()+"'/><br/><br/>"+
                "Pontos: " + pontos.round(2)
                }).then(
                    message => console.log(message)
                ); 
        }else{
            alert('Você não fez pontos suficiente. Tudo bem, assista o vídeo novamente e repita o teste.');
        }
    }

    Number.prototype.round = function(places) {
  return +(Math.round(this + "e+" + places)  + "e-" + places);
}

$(document).ready(function()
{
    $('#form_dadospessoais').submit(function(event){
        if(!this.checkValidity())
        {
            event.preventDefault();
        }
        else{
          $('#dadospessoais').hide(400);
          $('#questao1').show(400);
          event.preventDefault();
        }
    });
});

</script>
